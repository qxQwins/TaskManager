<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Task description</title>
</head>
<body>
<h1><span th:text="${task.title} + '(' + ${task.status} + ')'"></span></h1>
<h2><span th:text="${task.description}"></span></h2>
<p th:text="${task.getComments().size() > 0
             ? task.getComments().size() + ' ' + (task.getComments().size() == 1 ? 'Comment' : 'Comments')
             : 'No comments yet'}"></p>
<table>
    <tr th:each="c : ${task.getComments()}" >
        <td>
            <span th:text="${c.author.email}"></span>
            <br>
            <small th:text="${c.text}" style="color: gray;"></small>
        </td>
    </tr>
</table>
<h3>Add a Comment</h3>
<form action="/addComment" method="post">
    <input type="hidden" name="task.id" th:value="${task.id}" />
    <label for="comment">Comment:</label>
    <br>
    <textarea id="comment" name="message" rows="1" required placeholder="Write your comment here"></textarea>
    <br>
    <button type="submit">Submit</button>
</form>
<br>
<a href="/tasks">Back</a>
</body>
</html>